\chapter{Maximal values of arithmetic frieze patterns}\label{s:arith_fp}
\begin{definition}
    \label{def:arith_fp}
    \uses{def:pattern_n} 
    \lean{arith_fp}
    \leanok
        A $\mathbb{Q}$-valued pattern of height $n$ is said to be an \textit{arithmetic frieze pattern} if it takes 
        values in $\mathbb{Z}_{>0}$. 
        We denote by Frieze$(n)$ the set of arithmetic frieze patterns of height $n$. 
\end{definition}

The following proposition is a key result connecting arithmetic frieze patterns to flutes.
\begin{proposition}
    \uses{def:flute,def:arith_fp, l:pattern_nContinuant,prop:trsltInv}
    \label{prop:friezeIffFlute}
    \lean{friezeToFlute,frieze_f,fluteToFrieze}
1) Let $f$ be an arithmetic frieze pattern of height $n$. For all $m \in \mathbb{Z}$, the $n$-tuple
\[
    (f (1,m), f (2,m), \ldots, f (n,m))
\]
is a flute of height $n$.

2) Given a flute $(a_1, \ldots, a_n)$, there exists a arithmetic frieze pattern $f$ of height $n$ such that
\[
    (f (1,0), \ldots, f (n,0)) = (a_1, \ldots, a_n).
\]
\end{proposition}
\begin{proof}
    1) Note that we have $f(1,0) = f(n,0) = 1$ by definition. Moreover, $f$ is arithmetic and so the first 
    equation in Lemma \ref{l:pattern_nContinuant} is precisely the divisibility condition defining a flute.

    2) By arguing recursively, one can construct a pattern $f$ such that $ (f (1,0), \ldots, f (n,0)) = (a_1, \ldots, a_n)$. 
    Moreover, such a frieze pattern is necessarily positive and $\mathbb{Q}$-valued. It remains to show that $f$ is integer-valued. 
    We begin by showing that $f (2,m) \in \mathbb{Z}$ for all $m \in \mathbb{Z}$. 
    By the definition of a flute, $f (2,0) \in \mathbb{Z}$, and for each 
    $i \in \{1,\ldots, n-2\}$, there exists a positive integer $c_i$ such that
    \[
        f(i+1,0) * c_i = f (i+2,0) + f (i,0).    
    \]
    Using the first equation in Lemma \ref{l:pattern_nContinuant}, we deduce that $f(2,i) \in \mathbb{Z}$ for $i =0, \ldots, n-2$. 
    Moreover, $ f (2,n-1) = f (n-1,0) \in \mathbb{Z}$ by assumption. Thus we have proved that 
    $f (2,m) \in \mathbb{Z}$ for $m = 0, \ldots, n-1$. To see that $f (2,n) \in \mathbb{Z}$, note from 
    Lemma \ref{l:pattern_nContinuant} that $f (2,n) = f (n-1,1)$ can be expressed as a {\it polynomial} with 
    integer coefficients in the variables $f (2,1), f (2,2),\ldots , f (2,n-2)$. The claim for all $m$ then follows from 
    Proposition \ref{prop:trsltInv}. 

    To see how this implies that $f (i,m) \in \mathbb{Z}$ for all $i \in \{2, \ldots, n\}$, it suffices to 
    see, again from Lemma \ref{l:pattern_nContinuant}, that every $f (i,m)$ can be expressed as a {\it polynomial} with 
    integer coefficients in the variables $f (2,m), f (2,m+1),\ldots , f (2,m+i-2)$.

\end{proof}

\begin{corollary}
    \label{c:arithFriezePatSetNonEmpty}
    \lean{arithFriezePatSetNonEmpty}
    \uses{l:nFluteNonEmpty, prop:friezeIffFlute}
    \lean{arithFriezePatSetNonEmpty}
    \leanok
    Fix a positive integer $n$. The set Frieze$(n)$ is non-empty.
\end{corollary}
\begin{proof}\leanok
    The proof of Lemma \ref{l:nFluteNonEmpty} showed that $(1,1,\ldots, 1)$ is a flute. 
    The claim then follows from 2) of Proposition \ref{prop:friezeIffFlute}.
\end{proof}

By combining Proposition \ref{prop:friezeIffFlute} with Proposition \ref{prop:FluteBounded}, we see that 
for each $n$, there is a well-defined positive integer, called the {\it maximum value} among arithmetic frieze patterns of height $n$, defined by
    \[
        u_n := \max ( f (i,m) : f \in  {\rm Frieze}(n), i \in \{1,\ldots, n\}, m \in \mathbb{Z}).
    \]



We are now able to formulate and prove the main theorem of this section.
\begin{theorem}
    \label{mainTheorem}
    \lean{main1,main2,main3}
    \leanok
    \uses{prop:FluteBounded, l:FibFlute, prop:friezeIffFlute}
    For all $n \geq 1$, we have 
    \[
        u_n = F_{n}.
    \]    
\end{theorem}
\begin{proof}\leanok
    By Proposition \ref{prop:friezeIffFlute}, every entry of an arithmetic frieze pattern of height $n$ belongs to a flute of height $n$.
    By Proposition \ref{prop:FluteBounded}, entries in a flute of height $n$ are bounded above by $F_n$. Thus $u_n \leq F_n$ for all $n$. 
On the other hand, Lemma \ref{l:FibFlute} and 2) of Proposition \ref{prop:friezeIffFlute} show that 
there exists an arithmetic frieze pattern of height $n$ containing $F_n$ as a value.
\end{proof}